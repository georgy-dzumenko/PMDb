(this.webpackJsonpwatchlist=this.webpackJsonpwatchlist||[]).push([[0],{39:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t),c.d(t,"store",(function(){return pe}));var n=c(1),i=c.n(n),a=c(32),s=c.n(a),r=(c(48),c(49),c(18)),o=c(19),l=c(20),j=c(7),d=c(0),u=c(17),m=function(){var e=Object(j.g)();return Object(d.jsxs)("div",{id:"menu",className:u("menu",{"menu--active":"#menu"===e.hash}),children:[Object(d.jsx)("div",{className:"navigation",children:Object(d.jsx)("div",{className:"navigation__content",children:Object(d.jsx)(l.a,{smooth:!0,to:"#",className:"menu__close-button",children:Object(d.jsx)(r.a,{icon:o.b})})})}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"menu__title",children:"Menu"}),Object(d.jsxs)("ul",{className:"menu__main",children:[Object(d.jsx)("li",{className:"menu__main-item",children:Object(d.jsx)(l.a,{className:"menu__link",to:"/",children:"home"})}),Object(d.jsx)("li",{className:"menu__main-item",children:Object(d.jsx)(l.a,{className:"menu__link",to:"/info",children:"info"})}),Object(d.jsx)("li",{className:"menu__main-item",children:Object(d.jsx)("a",{className:"menu__link",href:"#info",children:"adsadfs"})})]})]})]})},b=c(5),h=c(9),_=c(16),v=c.n(_),p=c(27),O=c(15),f=c(22),g="https://api.themoviedb.org/3/",x="a1cacae9e097c731c0046cf30fa3b749",N=function(){var e=Object(f.a)(v.a.mark((function e(t){var c,n=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multi"!==(c=n.length>1&&void 0!==n[1]?n[1]:"movie")){e.next=3;break}return e.abrupt("return",fetch("".concat(g,"discover/movie?year=").concat(t,"&api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{media_type:"movie"})}))})).then((function(e){return N("2021","tv").then((function(t){return[].concat(Object(p.a)(e),Object(p.a)(t.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{media_type:"tv",title:e.name})}))))}))})));case 3:return e.abrupt("return",fetch("".concat(g,"discover/").concat(c,"?year=").concat(t,"&api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{media_type:c,title:e.name||e.title})}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return fetch("".concat(g,"account?api_key=").concat(x,"&session_id=").concat(e)).then((function(e){return e.json()}))},k=function(e){return fetch("".concat(g,"person/").concat(e,"?api_key=").concat(x)).then((function(e){return e.json()}))},w=function(){return fetch("".concat(g,"genre/movie/list?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.genres}))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"https://image.tmdb.org/t/p/".concat(t?"w500":"original","/").concat(e)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"https://image.tmdb.org/t/p/".concat(t?"w500":"original","/").concat(e)},C=c(17),L=function(e){var t,c=e.last,n=void 0!==c&&c,i=e.movie,a=e.genres,s=Object(j.f)();return Object(d.jsxs)("div",{className:C("movie-card",{"movie-card--last":n}),onClick:function(){console.log(s),s.push("/".concat(i.media_type,"/").concat(i.id)),window.location.reload()},children:[Object(d.jsx)("img",{src:S(null===i||void 0===i?void 0:i.poster_path,!0),alt:"",className:"movie-card__img"}),Object(d.jsxs)("div",{className:"movie-card__description",children:[Object(d.jsx)("img",{className:"movie-card__description-img",src:S(i.backdrop_path,!0),alt:""}),Object(d.jsxs)("div",{className:"movie-card__description-content",children:[Object(d.jsx)("h1",{className:"movie-card__description-title",children:null===i||void 0===i?void 0:i.title}),Object(d.jsx)("ul",{className:"movie-card__description-ganres-list",children:null===(t=i.genre_ids)||void 0===t?void 0:t.map((function(e){var t;return Object(d.jsx)("li",{className:"movie-card__description-ganre",children:null===(t=a.find((function(t){var c=t.id;return e===c})))||void 0===t?void 0:t.name})}))})]})]})]})},T=c(17),E=function(e){var t=e.person;return Object(d.jsxs)(h.b,{to:"/people/".concat(t.id),className:T("person-card"),children:[Object(d.jsx)("img",{src:S(t.profile_path,!0),alt:"",className:"person-card__img"}),Object(d.jsx)("div",{className:"person-card__job",children:t.job||t.character}),Object(d.jsx)("div",{className:"person-card__name",children:t.name})]})},F=c(17),P=function(e){var t=e.moviesList,c=void 0===t?null:t,i=e.peopleList,a=void 0===i?[]:i,s=Object(n.useRef)(null),l=Object(n.useState)([]),j=Object(b.a)(l,2),u=j[0],m=j[1];return Object(n.useEffect)((function(){w().then((function(e){return m(e)}))}),[]),Object(d.jsxs)("div",{className:"movies-slider",children:[Object(d.jsx)("div",{onClick:function(){s.current.scrollBy({left:-1*s.current.clientWidth*.9,behavior:"smooth"})},className:F(["movies-slider__scroll-button","movies-slider__scroll-button--left",{"movies-slider--disabled":c||a}]),children:Object(d.jsx)(r.a,{icon:o.b})}),Object(d.jsx)("div",{ref:s,className:"movies-slider__tape",children:Object(d.jsxs)("div",{className:"movies-slider__content",children:[a.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(E,{person:e})})})),c?null===c||void 0===c?void 0:c.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsx)(L,{last:0===t,movie:e,genres:u})})})):""]})}),Object(d.jsx)("div",{onClick:function(){s.current.scrollBy({left:.9*s.current.clientWidth,behavior:"smooth"})},className:"movies-slider__scroll-button movies-slider__scroll-button--right",children:Object(d.jsx)(r.a,{icon:o.c})})]})},q=(c(38),function(){var e,t=Object(j.h)("/:movieType/:movieId"),c=Object(n.useState)([]),i=Object(b.a)(c,2),a=i[0],s=i[1],r=Object(n.useState)([]),o=Object(b.a)(r,2),l=o[0],u=o[1],m=Object(n.useState)([]),_=Object(b.a)(m,2),v=_[0],p=_[1],f=Object(n.useState)({}),N=Object(b.a)(f,2),y=N[0],k=N[1],w=Object(n.useState)([]),I=Object(b.a)(w,2),C=I[0],L=I[1],T=Object(n.useState)([]),E=Object(b.a)(T,2),F=E[0],q=E[1],B=Object(j.g)();return console.log(a),Object(n.useEffect)((function(){var e,c;(e=t.params.movieId,c=t.params.movieType,fetch("".concat(g).concat(c,"/").concat(e,"/videos?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){var t;u(null===(t=e[0])||void 0===t?void 0:t.key)})),function(e,t){return fetch("".concat(g).concat(t,"/").concat(e,"/credits?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.crew}))}(t.params.movieId,t.params.movieType).then((function(e){p(e.reverse())})),function(e,t){return fetch("".concat(g).concat(t,"/").concat(e,"/credits?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.cast}))}(t.params.movieId,t.params.movieType).then((function(e){s(e.reverse())})),function(e,t){return fetch("".concat(g).concat(t,"/").concat(e,"?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return Object(O.a)(Object(O.a)({},e),{},{media_type:t,title:e.title||e.name})}))}(t.params.movieId,t.params.movieType).then((function(e){k(e)})),function(e,t){return fetch("".concat(g).concat(t,"/").concat(e,"/similar?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{media_type:t,title:e.title||e.name})}))}))}(t.params.movieId,t.params.movieType).then((function(e){L(e)})),function(e,t){return fetch("".concat(g).concat(t,"/").concat(e,"/reviews?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results}))}(t.params.movieId,t.params.movieType).then((function(e){q(e)}))}),[B,t.params.movieId,t.params.movieType]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[t]),Object(d.jsx)("div",{className:"page",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"movie-page",children:[Object(d.jsxs)("section",{className:"page__section grid grid--desktop",children:[Object(d.jsx)("div",{className:"movie-page__poster grid__item--1-4",children:Object(d.jsx)("img",{src:S(y.poster_path),alt:"",className:"movie-page__poster-img"})}),Object(d.jsxs)("div",{className:"page__description grid__item--5-12 grid grid--desktop",children:[Object(d.jsx)("div",{className:"grid__item--1-12 page__title movie-page__title",children:null===y||void 0===y?void 0:y.title}),Object(d.jsxs)("div",{className:"movie-page__votes grid__item--1-12",children:["imdb: ",Object(d.jsx)("span",{className:"movie-page__votes-value",children:null===y||void 0===y?void 0:y.vote_average})]}),Object(d.jsx)("div",{className:"movie-page__overview grid__item--1-12",children:y.overview}),Object(d.jsx)("div",{className:"movie-page__genres-list grid__item-1-12",children:null===(e=y.genres)||void 0===e?void 0:e.map((function(e){var t=e.name;return Object(d.jsx)("div",{className:"movie-page__genre",children:t})}))}),y.belongs_to_collection&&Object(d.jsxs)("div",{className:"grid__item--1-12",children:["collection:",Object(d.jsx)(h.b,{to:"/collections/".concat(y.belongs_to_collection.id),children:y.belongs_to_collection.name})]})]})]}),Object(d.jsx)("section",{className:"page__section",children:Object(d.jsx)("div",{className:"movie-page__trailer",children:Object(d.jsx)("iframe",{title:"trailer",className:"movie-page__video",src:"https://www.youtube.com/embed/".concat(l),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),Object(d.jsxs)("section",{className:"page__section",children:[Object(d.jsx)("div",{className:"page__title",children:"reviews"}),F.map((function(e){return Object(d.jsxs)("div",{className:"review",children:[Object(d.jsxs)("div",{className:"review__author",children:[Object(d.jsx)("img",{src:S(e.author_details.avatar_path,!0),alt:"",className:"review__author-img"}),Object(d.jsx)("div",{className:"review__author-nickname",children:e.author_details.name})]}),Object(d.jsx)("div",{className:"review__content",children:e.content}),Object(d.jsx)("div",{className:"review__footer",children:new Date(e.created_at).toLocaleString("default",{year:"numeric",month:"long"})})]})}))]}),Object(d.jsxs)("section",{className:"page__section",children:[Object(d.jsx)("div",{className:"page__title",children:"Cast"}),Object(d.jsx)(P,{peopleList:a}),Object(d.jsx)("div",{className:"page__title",children:"Crew"}),Object(d.jsx)(P,{peopleList:v})]}),Object(d.jsxs)("section",{className:"page__section",children:[Object(d.jsx)("div",{className:"page__title",children:"Similar"}),Object(d.jsx)(P,{moviesList:C})]})]})})})}),B=function(){return Object(d.jsx)("div",{className:"info page",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"info__param",children:[Object(d.jsx)("h1",{className:"info__title",children:"API:"}),Object(d.jsx)("a",{href:"https://www.themoviedb.org/",children:Object(d.jsx)("div",{className:"info__api"})})]})})})},A=c(21),D=c(72),J=c(70),M=c(71),R=c(64),H=c(67),U=c(65),V=c(66),W=c(68),z=c(69),G=c(25),K=c.n(G);M.a.use([R.a,U.a,V.a,H.a,W.a]);var Q=function(e){var t,c=e.moviesList,i=Object(n.useState)(0),a=Object(b.a)(i,2),s=a[0],r=a[1];new Image(1180,590).src="https://image.tmdb.org/t/p/original/".concat(null===(t=c[s])||void 0===t?void 0:t.backdrop_path);var o=Object(n.useCallback)(K()((function(){s!==c.length-1?r(s+1):r(0)}),1e4),[s]);return Object(n.useEffect)((function(){return o(),o.cancel}),[s,o]),Object(d.jsxs)(D.a,{modules:[V.a,U.a,z.a,H.a,W.a],effect:"coverflow",spaceBetween:0,slidesPerView:1,navigation:!0,pagination:{clickable:!0},loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},onSwiper:function(e){return console.log(e)},children:[null===c||void 0===c?void 0:c.map((function(e){return Object(d.jsx)(J.a,{children:Object(d.jsx)("div",{className:"poster",children:Object(d.jsxs)(h.b,{to:"".concat(e.media_type,"/").concat(e.id),children:[Object(d.jsx)("img",{src:S(e.backdrop_path),className:"poster__img",alt:""}),Object(d.jsx)("div",{className:"poster__title",children:e.title})]})})})})),Object(d.jsx)("div",{className:"prev"}),Object(d.jsx)("div",{className:"next"})]})},X=Object(A.b)((function(e){return{session_id:e.session.session}}))((function(e){var t=e.session_id,c=Object(n.useState)([]),i=Object(b.a)(c,2),a=i[0],s=i[1],r=Object(n.useState)([]),o=Object(b.a)(r,2),l=o[0],j=o[1],u=Object(n.useState)({}),m=Object(b.a)(u,2),h=m[0],_=m[1],v=Object(n.useState)([]),p=Object(b.a)(v,2),O=p[0],f=p[1];return Object(n.useEffect)((function(){N("2021","multi").then((function(e){return s(e)})),N("2021","movie").then((function(e){return f(e)})),N("2021","tv").then((function(e){return j(e)}))}),[]),Object(n.useEffect)((function(){y(t).then((function(e){return _(e)}))}),[t]),Object(d.jsx)("div",{className:"page home",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"page__title",children:h.username?"Hi, ".concat(h.username,"!"):"Home"}),Object(d.jsx)("section",{className:"page__section",children:Object(d.jsx)("main",{children:Object(d.jsx)(Q,{moviesList:a})})}),Object(d.jsxs)("section",{className:"page__section",children:[Object(d.jsx)("div",{className:"page__title",children:"Newest tv shows"}),Object(d.jsx)(P,{moviesList:l})]}),Object(d.jsxs)("section",{className:"page__section",children:[Object(d.jsx)("div",{className:"page__title",children:"Newest movies"}),Object(d.jsx)(P,{moviesList:O})]})]})})})),Y=function(){var e,t=Object(j.h)("/collections/:collectionId"),c=Object(n.useState)({}),i=Object(b.a)(c,2),a=i[0],s=i[1];return Object(n.useEffect)((function(){var e;(e=t.params.collectionId,fetch("".concat(g,"collection/").concat(e,"?api_key=").concat(x)).then((function(e){return e.json()}))).then((function(e){return s(e)}))}),[t.params.collectionId]),Object(d.jsx)("div",{className:"page",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"collections-page grid",children:[Object(d.jsxs)("div",{className:"grid grid__item--1-12",children:[Object(d.jsx)("div",{className:"collections-page__poster grid__item--1-3",children:Object(d.jsx)("img",{src:S(a.poster_path,!0),className:"collections-page__poster-img",alt:""})}),Object(d.jsxs)("div",{className:"page__description grid__item--4-12 grid",children:[Object(d.jsx)("h2",{className:"page__title grid__item--1-12",children:a.name}),Object(d.jsx)("div",{className:"grid__item--1-12",children:a.overview})]})]}),null===a||void 0===a||null===(e=a.parts)||void 0===e?void 0:e.map((function(e){return Object(d.jsxs)(h.b,{to:"/movies/".concat(e.id),className:"collections-page__part grid grid__item--1-12",children:[Object(d.jsx)("div",{className:"collections-page__poster grid__item--1-2",children:Object(d.jsx)("img",{src:S(e.poster_path,!0),className:"collections-page__poster-img",alt:""})}),Object(d.jsx)("div",{className:"page__title grid__item--3-12",children:e.title})]})}))]})})})},Z=c(34),$=function(){var e,t=Object(j.h)("/people/:personId"),c=Object(n.useState)([]),i=Object(b.a)(c,2),a=i[0],s=i[1],r=Object(n.useState)({}),o=Object(b.a)(r,2),l=o[0],u=o[1],m=Object(j.g)();return Object(n.useEffect)((function(){var e;k(t.params.personId).then((function(e){return u(e)})),(e=t.params.personId,fetch("".concat(g,"person/").concat(e,"/combined_credits?api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e}))).then((function(e){return s(e)}))}),[m,t.params.personId]),Object(d.jsx)("div",{className:"page",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"person-page grid",children:[Object(d.jsx)("div",{className:"person-page__poster grid__item--1-4",children:Object(d.jsx)("img",{src:I(l.profile_path),className:"person-page__poster-img",alt:""})}),Object(d.jsxs)("div",{className:"grid__item--5-12",children:[Object(d.jsx)("h1",{className:"person-page__name",children:l.name}),Object(d.jsxs)("div",{className:"person-page__params",children:[Object(d.jsxs)("div",{className:"person-page__param",children:[Object(d.jsx)("div",{children:"known for"}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:l.known_for_department})]}),Object(d.jsxs)("div",{className:"person-page__param",children:[Object(d.jsx)("div",{children:"born"}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:l.birthday})]}),l.deathday&&Object(d.jsxs)("div",{className:"person-page__param",children:[Object(d.jsx)("div",{children:"died"}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:l.deathday})]})]})]}),Object(d.jsxs)("div",{className:"person-page__biography grid__item--1-12",children:[Object(d.jsx)("h2",{className:"person-page__section-title",children:"Biography"}),Object(d.jsx)("div",{className:"person-page__biography-main",children:l.biography})]}),Object(d.jsxs)("div",{className:"grid__item--1-12",children:[Object(d.jsx)("h2",{className:"person-page__section-title",children:"Acting"}),Object(d.jsx)("div",{children:Object(d.jsx)(P,{moviesList:a.cast})})]}),Object.entries((null===(e=a.crew)||void 0===e?void 0:e.reduce((function(e,t){return{filtered:Object(O.a)(Object(Z.a)({},t.job,e.full.filter((function(e){return e.job===t.job}))),e.filtered),full:e.full.filter((function(e){return e.job!==t.job}))}}),{full:a.crew}).filtered)||{}).sort((function(e,t){return t[1].length-e[1].length})).map((function(e){return Object(d.jsxs)("div",{className:"grid__item--1-12",children:[Object(d.jsx)("h2",{className:"person-page__section-title",children:e[0]}),Object(d.jsx)("div",{children:Object(d.jsx)(P,{moviesList:e[1]})})]})}))]})})})},ee=(c(17),function(e){var t=e.queryName,c=Object(j.g)(),i=Object(j.f)(),a=new URLSearchParams(c.search),s=Object(n.useState)([]),r=Object(b.a)(s,2),o=r[0],l=r[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),h=m[0],_=m[1],O=Object(n.useCallback)(K()((function(e){var t;(t=e,fetch("".concat(g,"search/person?api_key=").concat(x,"&query=").concat(t)).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){return l((e||[]).slice(0,7))}))}),500),[]);Object(n.useEffect)((function(){console.log("works"),l(o.filter((function(e){return!a.get(t).split(",").some((function(t){return t===e.id}))})))}),[a.get(t)]);var N=function(){var e=Object(f.a)(v.a.mark((function e(){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,(i=(null===(c=a.get(t))||void 0===c?void 0:c.split(","))||[],i.map(function(){var e=Object(f.a)(v.a.mark((function e(t){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"person/").concat(t,"?api_key=").concat(x));case 2:return c=e.sent,n=c.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).forEach((function(e){return e.then((function(e){e.id&&n.push(e)}))}));case 3:return e.next=5,_(n);case 5:console.log("loaded");case 6:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(v.a.mark((function e(c){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(c).then((function(e){_([].concat(Object(p.a)(h),[e]))}));case 2:a.set(t,[a.get(t),c]),i.push({search:a.toString()});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(v.a.mark((function e(c){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(p.a)(h).filter((function(e){return+c!==+e.id}))),a.set(t,a.get(t).split(",").filter((function(e){return+c!==+e}))),i.push({search:a.toString()});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){N()}),[]),Object(d.jsxs)("div",{className:"actors-filter",children:[Object(d.jsxs)("div",{className:"actors-filter__input-container",children:[Object(d.jsx)("input",{onChange:function(e){O(e.target.value)},className:"actors-filter__input"}),Object(d.jsx)("div",{className:"actors-filter__results-block",children:o.map((function(e){return Object(d.jsxs)("div",{className:"actors-filter__result",children:[Object(d.jsx)("img",{src:I(e.profile_path,!0),alt:"",className:"actors-filter__result-img"}),Object(d.jsx)("div",{onClick:function(){return y(e.id)},className:"actors-filter__add-actor",children:"add actor"})]})}))})]}),Object(d.jsx)("div",{className:"actors-filter__selected-actors-block",children:h.map((function(e){return Object(d.jsxs)("div",{className:"actors-filter__selected-actor",children:[Object(d.jsx)("img",{src:I(e.profile_path),alt:"",className:"actors-filter__selected-actor-img"}),Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("div",{onClick:function(){return w(e.id)},className:"actors-filter__unselect-actor-button"})]})}))})]})}),te=c(17),ce=function(e){var t=e.filter,c=e.title,i=Object(n.useState)(!1),a=Object(b.a)(i,2),s=a[0],r=a[1];return Object(d.jsxs)("div",{className:te(["search-page__filter-visibility-toggler",{"search-page__filter-visibility-toggler--active":s}]),children:[Object(d.jsx)("div",{className:te(["search-page__filter-visibility-toggler-text",{"search-page__filter-visibility-toggler-text--active":s}]),onClick:function(){return r(!s)},children:c}),Object(d.jsx)("div",{className:te(["search-page__filter-visibility-toggler-content",{"search-page__filter-visibility-toggler-content--active":s}]),children:t})]})},ne=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=(t[0],t[1]);return Object(n.useEffect)((function(){w().then((function(e){return c(e)}))}),[]),Object(d.jsx)("div",{className:"page",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)("div",{className:"search-page__filters-block grid__item--1-4",children:Object(d.jsx)("div",{className:"search-page__filter",children:Object(d.jsx)(ce,{title:"actors filter",filter:Object(d.jsx)(ee,{queryName:"actors"})})})}),Object(d.jsx)("input",{type:"text",className:"search-page__search grid__item--5-12"})]})})})},ie="SESSION/SET_ID",ae=c(17),se=Object(A.b)((function(e){return{session_id:e.session.session}}),{setSessionId:function(e){return localStorage.setItem("session",e),{type:ie,payload:e}}})((function(e){var t=e.session_id,c=e.setSessionId,i=Object(j.g)(),a=Object(n.useState)(""),s=Object(b.a)(a,2),r=s[0],o=s[1],u=Object(n.useState)({}),m=Object(b.a)(u,2),h=m[0],_=m[1],v=Object(j.f)({});return console.log("sid",t),console.log("ud",h),Object(n.useEffect)((function(){""!==t&&y(t).then((function(e){return _(e)}))}),[t]),Object(d.jsxs)("form",{id:"login",action:"",className:ae("login",{"login--active":"#login"===i.hash}),onSubmit:function(e){""!==t?c(""):fetch("".concat(g,"/authentication/token/new?api_key=").concat(x)).then((function(e){return e.json()})).then((function(t){console.log("token",t),o(t.request_token),function(e,t,c){return fetch("https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=".concat(x),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({username:e,password:t,request_token:c})}).then((function(e){return e.json()}))}(e.target.elements.username.value,e.target.elements.password.value,r).then((function(e){(function(e){return fetch("https://api.themoviedb.org/3/authentication/session/new?api_key=".concat(x),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({request_token:e})}).then((function(e){return e.json()}))})(e.request_token).then((function(e){return c(e.session_id)})),console.log(e)}))}))},children:[Object(d.jsx)("div",{className:"login__title",children:t?"Are you sure?":"Log in"}),""===t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{htmlFor:"username",className:"login__label",children:"User name"}),Object(d.jsx)("input",{type:"text",id:"username",className:"login__field"}),Object(d.jsx)("label",{htmlFor:"password",className:"login__label",children:"Password"}),Object(d.jsx)("input",{type:"password",id:"password",className:"login__field"}),Object(d.jsx)("button",{onClick:function(){return v.push({hash:"#"})},type:"submit",className:"login__submit-button",children:"accept"})]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{to:"#",type:"submit",className:"login__log-out-button",children:"Log out"})}),Object(d.jsx)(l.a,{to:"#",className:"login__close-button"})]})})),re=(c(39),c(17)),oe=function(e){var t=e.text,c=Object(n.useState)(!1),i=Object(b.a)(c,2),a=i[0],s=i[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:re("navigation__dropdown",{"navigation__dropdown--active":a}),onClick:function(){return s(!a)},onMouseLeave:function(){return s(!1)},children:[Object(d.jsx)("div",{className:"navigation__link-text",children:t}),Object(d.jsxs)("div",{className:re("navigation__dropdown-options-block",{"navigation__dropdown-options-block--active":!a}),children:[Object(d.jsx)("div",{className:"navigation__dropdown-option",children:Object(d.jsx)("div",{className:"navigation__link-text",children:"aasfadfsdfsa"})}),Object(d.jsx)("div",{className:"navigation__dropdown-option",children:Object(d.jsx)("div",{className:"navigation__link-text",children:"aasfadfsdfsa"})})]})]})})},le=c(17),je=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)([]),s=Object(b.a)(a,2),l=s[0],j=s[1],u=Object(n.useState)(""),m=Object(b.a)(u,2),_=m[0],v=m[1],p=Object(n.useRef)(""),O=Object(n.useCallback)(K()((function(e){(function(e){return fetch("".concat(g,"search/multi?query=").concat(e,"&api_key=").concat(x)).then((function(e){return e.json()})).then((function(e){return e.results}))})(e).then((function(e){return j((e||[]).slice(0,7))}))}),500),[]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"navigation__search",children:[Object(d.jsx)("input",{ref:p,value:_,onChange:function(e){v(e.target.value),O(e.target.value),console.log("a")},onBlur:function(){return i(!1)},className:le("navigation__search-input",{"navigation__search-input--active":c})}),Object(d.jsx)("div",{onClick:function(){!1===c?(i(!0),p.current.focus()):i(!1)},className:le("navigation__search-icon",{"navigation__search-icon--active":c}),children:Object(d.jsx)(r.a,{icon:o.d})}),Object(d.jsx)("ul",{className:le("navigation__search-results-block",{"navigation__search-results-block--active":_&&c}),children:Object(d.jsxs)(d.Fragment,{children:[l.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsxs)(h.b,{to:"/".concat(e.media_type,"/").concat(e.id),className:"navigation__search-result",children:[Object(d.jsx)("img",{src:S(e.poster_path,!0),alt:"",className:"navigation__search-result-img"}),Object(d.jsx)("h2",{className:"navigation__search-result-title",children:e.title})]})},e.id)})),l.length>0?Object(d.jsx)("li",{className:"navigation__search-more-results",children:"more results..."},"end"):Object(d.jsx)("li",{className:"navigation__search-no-results",children:"no results"},"end")]})})]})})},de=Object(A.b)((function(e){return{session_id:e.session.session}}))((function(e){var t,c,i=e.session_id,a=Object(n.useState)({}),s=Object(b.a)(a,2),j=s[0],u=s[1];return Object(n.useEffect)((function(){y(i).then((function(e){return u(e)}))}),[i]),console.log("acc",j),Object(d.jsx)("div",{className:"navigation",children:Object(d.jsxs)("div",{className:"navigation__content",children:[Object(d.jsx)(l.a,{scroll:function(e){return e.scrollIntoView()},className:"navigation__menu",to:"#menu",children:Object(d.jsx)(r.a,{icon:o.a})}),Object(d.jsx)(h.b,{to:"/",className:"navigation__logo",children:"PMDb"}),Object(d.jsxs)("div",{className:"navigation__main",children:[Object(d.jsx)(oe,{text:"film catalogue"}),Object(d.jsx)(h.b,{to:"/info",className:"navigation__link",children:Object(d.jsx)("div",{className:"navigation__link-text",children:"Info"})}),Object(d.jsx)(h.b,{to:"/search",className:"navigation__link",children:Object(d.jsx)("div",{className:"navigation__link-text",children:"search"})})]}),Object(d.jsxs)("div",{className:"navigation__right-side-block",children:[Object(d.jsx)(je,{}),Object(d.jsx)(l.a,{to:"#login",className:"navigation__link",children:Object(d.jsx)("div",{className:"navigation__link-text",children:i?"log out":"log in"})}),Object(d.jsx)("img",{src:I(null===j||void 0===j||null===(t=j.avatar)||void 0===t||null===(c=t.tmdb)||void 0===c?void 0:c.avatar_path),alt:"",className:"navigation__avatar"})]})]})})}));var ue=function(){var e,t,c,n=Object(j.h)("/:mediaType/:mediaId");return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(de,{}),Object(d.jsx)(se,{}),Object(d.jsxs)(j.c,{children:[Object(d.jsx)(j.a,{name:"app",path:"/",exact:!0,children:Object(d.jsx)(X,{})}),Object(d.jsx)(j.a,{name:"app",path:"/search",exact:!0,children:Object(d.jsx)(ne,{})}),Object(d.jsx)(j.a,{path:"/info",children:Object(d.jsx)(B,{})}),Object(d.jsx)(j.a,{path:"/people/:personId",exact:!0,children:Object(d.jsx)($,{id:null===n||void 0===n||null===(e=n.params)||void 0===e?void 0:e.personId})}),Object(d.jsx)(j.a,{path:"/:mediaId/:mediaId",exact:!0,children:"collections"!==(null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.mediaType)?Object(d.jsx)(q,{id:null===n||void 0===n||null===(c=n.params)||void 0===c?void 0:c.mediaId}):Object(d.jsx)(Y,{})})]}),Object(d.jsx)(m,{})]})},me=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,73)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),a(e),s(e)}))},be=c(26),he={session:localStorage.getItem("session")||""},_e=Object(be.b)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return{session:t.payload}}return e}}),ve=c(42),pe=Object(be.c)(_e,Object(be.a)(ve.a));s.a.render(Object(d.jsx)(A.a,{store:pe,children:Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(h.a,{basename:"/",children:Object(d.jsx)(ue,{})})})}),document.getElementById("root")),me()}},[[63,1,2]]]);
//# sourceMappingURL=main.916d83e7.chunk.js.map